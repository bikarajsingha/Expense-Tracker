<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense - update password</title>
    <style>
    body {
        margin: 0;
        padding: 0;
        background-image: url("https://img.freepik.com/free-vector/abstract-background-groups-lines-white-colors_444390-7192.jpg?w=1380");
    }

    .container {
        max-width: 600px;
        margin: 0px auto;
        margin-top: 100px;
    }

    .forgetPassword {
        background-color: white;
        border-radius: 2%;
        box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
        padding: 50px 35px;
        padding-top: 10px;
        position: relative;
    }

    .findInHeader {
        display: block;
        border: 1px solid black;
        border-right: none;
        border-top: none;
        border-left: none;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    .text {
        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        display: block;
        margin: 10px 0px 15px;
    }

    .forgetPassword form input {
        display: block;
        width: 96%;
        margin: 10px 0px;
        padding: 5px 10px;
        border-radius: 5px;
        border: 1px solid black;
        font-size: 15px;
        background-color: white;
    }

    .submit {
        font-weight: bold;
        font-family: Arial;
        width: 45%;
        height: 40px;
        margin-top: 30px;
        background-color: white;
        color: rgb(113, 113, 238);
        border: 1px solid rgb(113, 113, 238);
        border-radius: 7px;
        padding: 7px 5px;
        text-decoration: none;
    }

    .submit:hover {
    background-color: rgb(113, 113, 238);
    color: white;
}
    #uid {
        display: none;
    }

    </style>
</head>
<body>
    <main class="container">
        <div class="forgetPassword">
            <span class="findInHeader">
                <h2 style="font-size: 35px;">NEW PASSWORD</h2>
            </span>
            <span class="text">     	
                Please enter your new password
            </span>
            <form id="forgetPasswordForm">
                <input type="password" id="password" name="password" placeholder="New Password" required>
                <input type="text" id="uid" name="uid" value=<%= uid %>>
                <button type="submit" class="submit">SUBMIT</button>
            </form>
        </div>
    </main>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        const form = document.getElementById('forgetPasswordForm')
        
        form.addEventListener('submit', (e) => {
            e.preventDefault()
            const id = document.getElementById('uid').value
            const pass = document.getElementById('password').value
            console.log(id, pass)
            axios.post('http://localhost:3000/password/updatepassword', {
            uid: id,
            password: pass
        })
        .then(_ => {
            alert('Successfully changed the password')
            setTimeout(window.location.replace('http://127.0.0.1:5500/Login/login.html'), 2000)
        })
        .catch(_ => {
            alert('Time passed out send new request')
            setTimeout(0, window.location.replace('http://127.0.0.1:5500/Login/password.html'))
        })
        })
    </script>
</body>
</html>